{% extends "Admin/base.html" %}
{% set set_permission_page = 'housekeeping_home' %}

{% block page %}Evènements{% endblock %}
{% block jsfile %}home{% endblock %}

{% block body %}
<div>
    <div class="kt-portlet">
        <form method="post" action="event/edit">
            <div class="kt-portlet__head">
                <div class="kt-portlet__head-label">
                        <span class="kt-portlet__head-icon">
                        <i class="flaticon-event-calendar-symbol"></i>
                        </span>
                    <h3 class="kt-portlet__head-title titleNews">
                        Gestion des évènements
                    </h3>
                </div>
            </div>

            <div class="kt-portlet__body">
                <div id="image-preview" style="background-image: url('{{ data.event_image }}')">
                    <label for="event_image" id="image-label">Choisir un fichier</label>
                    <input type="file" name="imagesUpload" id="event_image"/>
                </div>

                <div class="form-group">
                    <label for="event_description">Description</label>
                    <textarea class="form-control" name="event_description" id="event_description">{{ data.event_desc }}</textarea>
                </div>

                    <label for="event_link">Lien vers la page de l'évènement</label>
                    <input type="text" class="form-control" name="event_link" id="event_link" value="{{ data.event_link }}">

                <div class="mt-4 position-relative">
                    <label for="event_show" class="switch">
                        <input type="checkbox" name="event_show" id="event_show" {{ data.event_home ? 'checked' }}>
                        <span class="slider round"></span>
                    </label>
                    <span class="slider-label">Afficher le bandeau sur la page d'accueil</span>
                </div>

                <div class="row align-items-center">
                    <div class="col-lg-12 kt-align-right">
                        <button type="submit" class="btn btn-brand">Enregistrer</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<script>
    const image = document.getElementById('event_image')
    const preview = document.getElementById('image-preview')
    image.addEventListener('change', () => {
        const [file] = image.files
        const url = URL.createObjectURL(file)
        preview.style.backgroundImage = 'url(' + url + ')'
    })
</script>
{% endblock %}
